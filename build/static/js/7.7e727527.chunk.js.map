{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","store/actions/actions.js","views/pages/login/Login.js"],"names":["_slicedToArray","arr","i","Array","isArray","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_s","_i","next","done","push","value","length","err","unsupportedIterableToArray","TypeError","asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","error","Promise","then","_asyncToGenerator","fn","self","this","args","arguments","apply","LOGIN","body","dispatch","a","axios","post","response","status","data","role","window","localStorage","setItem","token","username","type","TYPES","payload","isLogged","isAdmin","console","log","LOGOUT","removeItem","userRole","Login","props","useDispatch","useState","email","password","loginForm","setLoginForm","setError","useSelector","state","login","formErrors","setFormErrors","onInputChange","e","target","name","test","String","toLowerCase","handleLogin","preventDefault","ACTIONS","getItem","history","className","md","color","onChange","placeholder","autoComplete","xs","onClick","style","width","to","active","tabIndex"],"mappings":"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","file":"static/js/7.7e727527.chunk.js","sourcesContent":["import arrayWithHoles from \"@babel/runtime/helpers/esm/arrayWithHoles\";\nimport iterableToArrayLimit from \"@babel/runtime/helpers/esm/iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableRest from \"@babel/runtime/helpers/esm/nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","import * as TYPES from \"../types/types\";\nimport axios from \"axios\";\n\nexport const GET_ALL_CATEGORY = () => async (dispatch) => {\n  try {\n    const response = await axios.get(\"https://localhost:3500/category/list\");\n    dispatch({\n      type: TYPES.GET_ALL_CATEGORY,\n      payload: response.data,\n    });\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const LOGIN = (body) => async (dispatch) => {\n  try {\n\n    const response = await axios.post(`/user/login`,body);\n    if(response.status === 200){\n      // console.log('yes ');\n      if(response.data.role === 'admin'){\n        // console.log(response.data);\n      window.localStorage.setItem('token',response.data.token);\n      window.localStorage.setItem('role',response.data.role);\n      window.localStorage.setItem('username',response.data.username);\n        dispatch({\n          type: TYPES.LOGIN,\n          payload: {isLogged:true,isAdmin:true,username:response.data.username},\n        });\n    }else{\n      window.localStorage.setItem('token',response.data.token);\n      window.localStorage.setItem('role',response.data.role);\n      window.localStorage.setItem('username',response.data.username);\n        dispatch({\n          type: TYPES.LOGIN,\n          payload: {isLogged:true,isAdmin:false,username:response.data.username},\n        });\n    }\n  }\n    // console.log(body,dispatch);\n    console.log(response.data);\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nexport const LOGOUT = () =>  (dispatch) => {\n  console.log(\"Logout Delete localstorage\");\n      window.localStorage.removeItem('token');\n      window.localStorage.removeItem('role');\n\n      dispatch({\n        type: TYPES.LOGOUT,\n        // change the isAdmin to false i made it true for testing only\n        payload: {isLogged:false,isAdmin:false,username:'',userRole:''},\n      });\n\n}\n","import React, { useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport {\n  CAlert,\n  CButton,\n  CCard,\n  CCardBody,\n  CCardGroup,\n  CCol,\n  CContainer,\n  CForm,\n  CInput,\n  CInputGroup,\n  CInputGroupPrepend,\n  CInputGroupText,\n  CRow\n} from '@coreui/react'\n\nimport CIcon from '@coreui/icons-react'\nimport { useDispatch, useSelector } from 'react-redux'\n\nimport * as ACTIONS from '../../../store/actions/actions'\n\n\nfunction validateEmail(email) {\n  const re = /^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$/g;\n  return re.test(String(email).toLowerCase());\n}\n\nconst Login = (props) => {\n\n  const dispatch = useDispatch();\n  const [loginForm, setLoginForm] = useState({\n    email: \"\",\n    password: \"\",\n  });\n  const [error, setError] = useState(\"\")\n  const [isAdmin, setisAdmin] = useState(\"\")\n  const login = useSelector(state => state.login)\n  const [formErrors, setFormErrors] = useState({\n    email: \"\",\n    password: \"\",\n  });\n  const onInputChange = (e) => {\n    // console.log(e.target.value);\n\n    if (e.target.name === \"email\") {\n      setLoginForm({\n        ...loginForm,\n        email: e.target.value,\n      });\n      if (e.target.value.length < 1) {\n        setFormErrors({\n          ...formErrors,\n          email: \"Field Required\",\n        });\n      } else {\n        if (!validateEmail(e.target.value)) {\n          console.log(\"invalid\");\n          setFormErrors({\n            ...formErrors,\n            email: \"InVaild Email\",\n          });\n        } else {\n          setFormErrors({\n            ...formErrors,\n            email: \"\",\n          });\n        }\n      }\n    } else {\n      setLoginForm({\n        ...loginForm,\n        password: e.target.value,\n      });\n      if (e.target.value.length < 1) {\n        setFormErrors({\n          ...formErrors,\n          password: \"Password is required\",\n        });\n      } else {\n        setFormErrors({\n          ...formErrors,\n          password: \"\",\n        });\n      }\n    }\n  };\n\n  const handleLogin = async(e)=>{\n    e.preventDefault();\n\n    const body = {email:loginForm.email,password:loginForm.password};\n    await dispatch(ACTIONS.LOGIN(body));\n    if(!localStorage.getItem('token')){\n      setError(\"Invalid Email or Password\")\n    }\n    if(localStorage.getItem('role') !=='admin') {\n      props.history.push('/my-surveys');\n    }else{\n      props.history.push(\"/home\");\n      // console.log(body);\n    }\n\n  }\n  return (\n    <div className=\"c-app c-default-layout flex-row align-items-center\">\n      <CContainer>\n        <CRow className=\"justify-content-center\">\n          <CCol md=\"8\">\n            <CCardGroup>\n              <CCard className=\"p-4\">\n                <CCardBody>\n                  <CForm>\n                    <h1>Login</h1>\n                    <p className=\"text-muted\">Sign In to your account</p>\n                    {error && <CAlert color=\"danger\">\n                    {error}\n                     </CAlert>}\n                    <CInputGroup className=\"mb-3\">\n                      <CInputGroupPrepend >\n                        <CInputGroupText >\n                          <CIcon name=\"cil-user\" />\n                        </CInputGroupText>\n                      </CInputGroupPrepend>\n                      <CInput type=\"text\"\n                              name=\"email\"\n                              onChange={(e)=>onInputChange(e)}\n                              placeholder=\"Email\"\n                              autoComplete=\"email\" />\n                    </CInputGroup>\n                    <CInputGroup className=\"mb-4\">\n                      <CInputGroupPrepend>\n                        <CInputGroupText>\n                          <CIcon name=\"cil-lock-locked\" />\n                        </CInputGroupText>\n                      </CInputGroupPrepend>\n                      <CInput type=\"password\"\n                              name=\"password\"\n                              onChange={(e)=>onInputChange(e)}\n                              placeholder=\"Password\"\n                              autoComplete=\"current-password\" />\n                    </CInputGroup>\n                    <CRow>\n                      <CCol xs=\"6\">\n                        <CButton onClick={handleLogin}  color=\"primary\" className=\"px-4\">Login</CButton>\n                      </CCol>\n                      <CCol xs=\"6\" className=\"text-right\">\n                        <CButton color=\"link\" className=\"px-0\">Forgot password?</CButton>\n                      </CCol>\n                    </CRow>\n                  </CForm>\n                </CCardBody>\n              </CCard>\n              <CCard className=\"text-white bg-primary py-5 d-md-down-none\" style={{ width: '44%' }}>\n                <CCardBody className=\"text-center\">\n                  <div>\n                    <h2>Sign up</h2>\n                    <p>To Create New Account</p>\n                    <Link to=\"/register\">\n                      <CButton color=\"warning\" className=\"mt-3\" active tabIndex={-1}>Register Now!</CButton>\n                    </Link>\n                  </div>\n                </CCardBody>\n              </CCard>\n            </CCardGroup>\n          </CCol>\n        </CRow>\n      </CContainer>\n    </div>\n  )\n}\n\nexport default Login\n"],"sourceRoot":""}