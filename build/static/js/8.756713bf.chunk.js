(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[8],{1619:function(e,n,t){"use strict";function a(e,n,t,a,s,o,c){try{var r=e[o](c),i=r.value}catch(l){return void t(l)}r.done?n(i):Promise.resolve(i).then(a,s)}function s(e){return function(){var n=this,t=arguments;return new Promise((function(s,o){var c=e.apply(n,t);function r(e){a(c,s,o,r,i,"next",e)}function i(e){a(c,s,o,r,i,"throw",e)}r(void 0)}))}}t.d(n,"a",(function(){return s}))},1641:function(e,n,t){"use strict";t.d(n,"a",(function(){return l})),t.d(n,"b",(function(){return m}));var a=t(569),s=t.n(a),o=t(1619),c=t(168),r=t(224),i=t.n(r),l=function(e){return function(){var n=Object(o.a)(s.a.mark((function n(t){var a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,i.a.post("/user/login",e);case 3:200===(a=n.sent).status&&("admin"===a.data.role?(window.localStorage.setItem("token",a.data.token),window.localStorage.setItem("role",a.data.role),window.localStorage.setItem("username",a.data.username),t({type:c.b,payload:{isLogged:!0,isAdmin:!0,username:a.data.username}})):(window.localStorage.setItem("token",a.data.token),window.localStorage.setItem("role",a.data.role),window.localStorage.setItem("username",a.data.username),t({type:c.b,payload:{isLogged:!0,isAdmin:!1,username:a.data.username}}))),console.log(a.data),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},m=function(){return function(e){console.log("Logout Delete localstorage"),window.localStorage.removeItem("token"),window.localStorage.removeItem("role"),e({type:c.c,payload:{isLogged:!1,isAdmin:!1,username:"",userRole:""}})}}},2057:function(e,n,t){"use strict";t.r(n);var a=t(2),s=t.n(a),o=t(338),c=t(86),r=t(53),i=t(1576),l=s.a.lazy((function(){return t.e(9).then(t.bind(null,2048))})),m=s.a.lazy((function(){return Promise.all([t.e(1),t.e(14)]).then(t.bind(null,2049))})),d=s.a.lazy((function(){return Promise.all([t.e(1),t.e(15)]).then(t.bind(null,2050))})),u=s.a.lazy((function(){return t.e(10).then(t.bind(null,2058))})),b=s.a.lazy((function(){return t.e(12).then(t.bind(null,2051))})),j=s.a.lazy((function(){return t.e(11).then(t.bind(null,2052))})),h=s.a.lazy((function(){return Promise.all([t.e(6),t.e(20)]).then(t.bind(null,2053))})),x=s.a.lazy((function(){return Promise.all([t.e(1),t.e(19)]).then(t.bind(null,2054))})),p=s.a.lazy((function(){return Promise.all([t.e(1),t.e(18)]).then(t.bind(null,2055))})),f=[{path:"/",exact:!0,name:"Home"},{path:"/my-surveys",exact:!0,name:"Surveys",component:s.a.lazy((function(){return Promise.all([t.e(1),t.e(21)]).then(t.bind(null,2056))}))},{path:"/dashboard",name:"Dashboard",component:l},{path:"/form",exact:!0,name:"Forms",component:m},{path:"/form/list",exact:!0,name:"Forms",component:m},{path:"/form/edit/:id",exact:!0,name:"Edit Form",component:b},{path:"/form/:id/submissions",exact:!0,name:"Form Submissions",component:d},{path:"/form/create",exact:!0,name:"Create Form",component:u},{path:"/form/display/:id",exact:!0,name:"Form",component:j},{path:"/form/submission/list",exact:!0,name:"Submissions",component:p},{path:"/submission/list",exact:!0,name:"Submissions",component:x},{path:"/submission/:id",exact:!0,name:"User Submission",component:h}],O=t(54),v=Object(O.jsx)("div",{className:"pt-3 text-center",children:Object(O.jsx)("div",{className:"sk-spinner sk-spinner-pulse"})}),g=function(){var e=Object(o.c)((function(e){return e.login}));return Object(O.jsx)("main",{className:"c-main",children:Object(O.jsx)(i.n,{fluid:!0,children:Object(O.jsx)(a.Suspense,{fallback:v,children:Object(O.jsxs)(r.d,{children:[f.map((function(n,t){return n.component&&Object(O.jsx)(r.b,{path:n.path,exact:n.exact,name:n.name,render:function(t){return!1!==e.isLogged?Object(O.jsx)(n.component,Object(c.a)({},t)):Object(O.jsx)(r.a,{to:{pathname:"/login"}})}},t)})),Object(O.jsx)(r.a,{from:"/",to:"/dashboard"})]})})})})},N=s.a.memo(g),w=function(){return Object(O.jsx)(i.t,{fixed:!1})},y=s.a.memo(w),S=t(1578),C=function(){var e=Object(o.b)(),n=Object(o.c)((function(e){return e.sidebarShow})),t=Object(o.c)((function(e){return e.login}));return Object(O.jsxs)(i.v,{withSubheader:!0,children:[Object(O.jsx)(i.T,{inHeader:!0,className:"ml-md-3 d-lg-none",onClick:function(){var t=!![!1,"responsive"].includes(n)||"responsive";e({type:"set",val:t})}}),Object(O.jsx)(i.T,{inHeader:!0,className:"ml-3 d-md-down-none",onClick:function(){var t=![!0,"responsive"].includes(n)&&"responsive";e({type:"set",val:t})}}),Object(O.jsxs)(i.x,{className:"d-md-down-none mr-auto",children:[Object(O.jsx)(i.w,{className:"mx-auto d-lg-none",to:"/",children:Object(O.jsx)(S.a,{name:"logo",height:"48",alt:"Logo"})}),Object(O.jsxs)(i.y,{className:"px-3",children:[t.isAdmin&&Object(O.jsx)(i.z,{to:"/dashboard",children:"Dashboard"}),!1===t.isAdmin?Object(O.jsx)(i.z,{to:"/my-surveys",children:"Surveys"}):Object(O.jsx)(O.Fragment,{})]}),Object(O.jsx)(i.y,{className:"px-3",children:t.isAdmin&&Object(O.jsx)(i.z,{to:"/form/list",children:"Forms"})})]}),Object(O.jsxs)(i.x,{className:"px-3",children:[Object(O.jsx)(F,{}),Object(O.jsx)(A,{}),Object(O.jsx)(z,{}),Object(O.jsx)(I,{})]}),t.isAdmin&&Object(O.jsx)(i.Q,{className:"px-3 justify-content-between",children:Object(O.jsx)(i.e,{className:"border-0 c-subheader-nav m-0 px-0 px-md-3",routes:f})})]})},k=t(1641),I=function(){var e=Object(o.b)();return Object(O.jsxs)(i.p,{inNav:!0,className:"c-header-nav-items mx-2",direction:"down",children:[Object(O.jsx)(i.s,{className:"c-header-nav-link",caret:!1,children:Object(O.jsx)("div",{className:"c-avatar",children:Object(O.jsx)(i.A,{src:"avatars/4.jpg",className:"c-avatar-img",alt:"admin"})})}),Object(O.jsxs)(i.r,{className:"pt-0",placement:"bottom-end",children:[Object(O.jsx)(i.q,{header:!0,tag:"div",color:"light",className:"text-center",children:Object(O.jsx)("strong",{children:"Account"})}),Object(O.jsxs)(i.q,{onClick:function(){e(k.b()),console.log("logout")},children:[Object(O.jsx)(S.a,{name:"cil-account-logout",className:"mfe-2"}),"Logout"]})]})]})},z=function(){return Object(O.jsx)(O.Fragment,{})},F=function(){return Object(O.jsx)(O.Fragment,{})},A=function(){return Object(O.jsx)(O.Fragment,{})},L=[{_tag:"CSidebarNavItem",name:"Dashboard",to:"/dashboard",icon:Object(O.jsx)(S.a,{name:"cil-speedometer",customClasses:"c-sidebar-nav-icon"})},{_tag:"CSidebarNavTitle",_children:["Form"]},{_tag:"CSidebarNavItem",name:"List",to:"/form/list",icon:"cil-list"},{_tag:"CSidebarNavItem",name:"Create",to:"/form/create",icon:"cil-task"},{_tag:"CSidebarNavDropdown",name:"Submissions",route:"/submission",_children:[{_tag:"CSidebarNavItem",name:"list",to:"/submission/list",icon:"cil-list"},{_tag:"CSidebarNavItem",name:"Form-Submissions",to:"/form/submission/list"}]}],P=function(){var e=Object(o.b)(),n=Object(o.c)((function(e){return e.sidebarShow}));return Object(O.jsxs)(i.I,{show:n,onShowChange:function(n){return e({type:"set",val:n})},children:[Object(O.jsxs)(i.J,{className:"d-md-down-none",to:"/",children:[Object(O.jsx)(S.a,{className:"c-sidebar-brand-full",name:"logo-negative",height:35}),Object(O.jsx)(S.a,{className:"c-sidebar-brand-minimized",name:"sygnet",height:35})]}),Object(O.jsx)(i.L,{children:Object(O.jsx)(i.o,{items:L,components:{CSidebarNavDivider:i.M,CSidebarNavDropdown:i.N,CSidebarNavItem:i.O,CSidebarNavTitle:i.P}})}),Object(O.jsx)(i.K,{className:"c-d-md-down-none"})]})},_=s.a.memo(P);n.default=function(){var e=Object(o.c)((function(e){return e.login}));return Object(O.jsxs)("div",{className:"c-app c-default-layout",children:[e.isAdmin&&Object(O.jsx)(_,{}),Object(O.jsxs)("div",{className:"c-wrapper",children:[Object(O.jsx)(C,{}),Object(O.jsx)("div",{className:"c-body",children:Object(O.jsx)(N,{})}),Object(O.jsx)(y,{})]})]})}}}]);
//# sourceMappingURL=8.756713bf.chunk.js.map