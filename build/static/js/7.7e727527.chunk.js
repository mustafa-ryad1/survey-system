(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[7],{1572:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a(339);function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],r=!0,n=!1,c=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(a.push(o.value),!t||a.length!==t);r=!0);}catch(i){n=!0,c=i}finally{try{r||null==s.return||s.return()}finally{if(n)throw c}}return a}}(e,t)||Object(r.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},1619:function(e,t,a){"use strict";function r(e,t,a,r,n,c,o){try{var s=e[c](o),i=s.value}catch(l){return void a(l)}s.done?t(i):Promise.resolve(i).then(r,n)}function n(e){return function(){var t=this,a=arguments;return new Promise((function(n,c){var o=e.apply(t,a);function s(e){r(o,n,c,s,i,"next",e)}function i(e){r(o,n,c,s,i,"throw",e)}s(void 0)}))}}a.d(t,"a",(function(){return n}))},1641:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return u}));var r=a(569),n=a.n(r),c=a(1619),o=a(168),s=a(225),i=a.n(s),l=function(e){return function(){var t=Object(c.a)(n.a.mark((function t(a){var r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.a.post("/user/login",e);case 3:200===(r=t.sent).status&&("admin"===r.data.role?(window.localStorage.setItem("token",r.data.token),window.localStorage.setItem("role",r.data.role),window.localStorage.setItem("username",r.data.username),a({type:o.b,payload:{isLogged:!0,isAdmin:!0,username:r.data.username}})):(window.localStorage.setItem("token",r.data.token),window.localStorage.setItem("role",r.data.role),window.localStorage.setItem("username",r.data.username),a({type:o.b,payload:{isLogged:!0,isAdmin:!1,username:r.data.username}}))),console.log(r.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},u=function(){return function(e){console.log("Logout Delete localstorage"),window.localStorage.removeItem("token"),window.localStorage.removeItem("role"),e({type:o.c,payload:{isLogged:!1,isAdmin:!1,username:"",userRole:""}})}}},2044:function(e,t,a){"use strict";a.r(t);var r=a(569),n=a.n(r),c=a(1619),o=a(86),s=a(1572),i=a(2),l=a(340),u=a(1576),d=a(1578),j=a(338),m=a(1641),b=a(54);t.default=function(e){var t=Object(j.b)(),a=Object(i.useState)({email:"",password:""}),r=Object(s.a)(a,2),h=r[0],p=r[1],O=Object(i.useState)(""),f=Object(s.a)(O,2),g=f[0],w=f[1],x=Object(i.useState)(""),v=Object(s.a)(x,2),y=(v[0],v[1],Object(j.c)((function(e){return e.login})),Object(i.useState)({email:"",password:""})),S=Object(s.a)(y,2),I=S[0],k=S[1],N=function(e){var t;"email"===e.target.name?(p(Object(o.a)(Object(o.a)({},h),{},{email:e.target.value})),e.target.value.length<1?k(Object(o.a)(Object(o.a)({},I),{},{email:"Field Required"})):(t=e.target.value,/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/g.test(String(t).toLowerCase())?k(Object(o.a)(Object(o.a)({},I),{},{email:""})):(console.log("invalid"),k(Object(o.a)(Object(o.a)({},I),{},{email:"InVaild Email"}))))):(p(Object(o.a)(Object(o.a)({},h),{},{password:e.target.value})),e.target.value.length<1?k(Object(o.a)(Object(o.a)({},I),{},{password:"Password is required"})):k(Object(o.a)(Object(o.a)({},I),{},{password:""})))},C=function(){var a=Object(c.a)(n.a.mark((function a(r){var c;return n.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r.preventDefault(),c={email:h.email,password:h.password},a.next=4,t(m.a(c));case 4:localStorage.getItem("token")||w("Invalid Email or Password"),"admin"!==localStorage.getItem("role")?e.history.push("/my-surveys"):e.history.push("/home");case 6:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"c-app c-default-layout flex-row align-items-center",children:Object(b.jsx)(u.n,{children:Object(b.jsx)(u.H,{className:"justify-content-center",children:Object(b.jsx)(u.l,{md:"8",children:Object(b.jsxs)(u.j,{children:[Object(b.jsx)(u.g,{className:"p-4",children:Object(b.jsx)(u.h,{children:Object(b.jsxs)(u.u,{children:[Object(b.jsx)("h1",{children:"Login"}),Object(b.jsx)("p",{className:"text-muted",children:"Sign In to your account"}),g&&Object(b.jsx)(u.a,{color:"danger",children:g}),Object(b.jsxs)(u.C,{className:"mb-3",children:[Object(b.jsx)(u.E,{children:Object(b.jsx)(u.F,{children:Object(b.jsx)(d.a,{name:"cil-user"})})}),Object(b.jsx)(u.B,{type:"text",name:"email",onChange:function(e){return N(e)},placeholder:"Email",autoComplete:"email"})]}),Object(b.jsxs)(u.C,{className:"mb-4",children:[Object(b.jsx)(u.E,{children:Object(b.jsx)(u.F,{children:Object(b.jsx)(d.a,{name:"cil-lock-locked"})})}),Object(b.jsx)(u.B,{type:"password",name:"password",onChange:function(e){return N(e)},placeholder:"Password",autoComplete:"current-password"})]}),Object(b.jsxs)(u.H,{children:[Object(b.jsx)(u.l,{xs:"6",children:Object(b.jsx)(u.f,{onClick:C,color:"primary",className:"px-4",children:"Login"})}),Object(b.jsx)(u.l,{xs:"6",className:"text-right",children:Object(b.jsx)(u.f,{color:"link",className:"px-0",children:"Forgot password?"})})]})]})})}),Object(b.jsx)(u.g,{className:"text-white bg-primary py-5 d-md-down-none",style:{width:"44%"},children:Object(b.jsx)(u.h,{className:"text-center",children:Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Sign up"}),Object(b.jsx)("p",{children:"To Create New Account"}),Object(b.jsx)(l.b,{to:"/register",children:Object(b.jsx)(u.f,{color:"warning",className:"mt-3",active:!0,tabIndex:-1,children:"Register Now!"})})]})})})]})})})})})}}}]);
//# sourceMappingURL=7.7e727527.chunk.js.map